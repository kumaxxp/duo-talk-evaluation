# duo-talk ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ– è©³ç´°è¨­è¨ˆæ›¸

**ä½œæˆæ—¥**: 2026-01-21  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0  
**ç›®çš„**: æ—¢å­˜duo-talkãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç¾¤ã®è¤‡é›‘æ€§ã‚’æ•´ç†ã—ã€è©•ä¾¡å¯èƒ½ãªæ§‹é€ ã«å†è¨­è¨ˆ

---

## 1. èƒŒæ™¯ã¨ç¾çŠ¶åˆ†æ

### 1.1 ç¾åœ¨ã®å•é¡Œ

| å•é¡Œ | å½±éŸ¿ | åŸå›  |
|------|------|------|
| **ä½•ãŒåŠ¹ã„ã¦ã„ã‚‹ã‹ä¸æ˜** | æ”¹å–„æ–¹å‘ãŒå®šã¾ã‚‰ãªã„ | ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯æ§‹é€ ã§æ©Ÿèƒ½ãŒæ··åœ¨ |
| **å†ç¾æ€§ãŒãªã„** | A/Bãƒ†ã‚¹ãƒˆãŒã§ããªã„ | å®Ÿè¡Œã®ãŸã³ã«çµæœãŒå¤‰ã‚ã‚‹ |
| **æ¯”è¼ƒãŒå›°é›£** | 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å·®ãŒåˆ†ã‹ã‚‰ãªã„ | çµ±ä¸€ã•ã‚ŒãŸè©•ä¾¡æ‰‹æ³•ãŒãªã„ |
| **è¤‡é›‘æ€§ã®å¢—å¤§** | ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å›°é›£ | GUIã€Directorã€RAGç­‰ãŒå¯†çµåˆ |

### 1.2 æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿæ…‹

#### duo-talk (ãƒ¡ã‚¤ãƒ³)
```
æ§‹æˆ: React/TypeScript GUI + Flask backend
ç‰¹å¾´: 
  - Directoræ©Ÿèƒ½ï¼ˆåŠ¹æœä¸æ˜ï¼‰
  - ChromaDBï¼ˆRAGï¼‰
  - 3ã¤ã®å®Ÿè¡Œãƒ‘ã‚¹ï¼ˆRUNS/LIVE/Consoleï¼‰
è©•ä¾¡: æœ€ã‚‚æˆåŠŸã—ã¦ã„ã‚‹ï¼ˆä¸»è¦³ï¼‰
èª²é¡Œ: ä½•ãŒåŠ¹ã„ã¦ã„ã‚‹ã‹ç‰¹å®šã§ããªã„
```

#### duo-talk-simple
```
æ§‹æˆ: CLIç‰¹åŒ–
ç‰¹å¾´: ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã‚’æ„å›³
è©•ä¾¡: æœŸå¾…ã‚ˆã‚Šæ€§èƒ½ãŒå‡ºãš
èª²é¡Œ: ãªãœã‚·ãƒ³ãƒ—ãƒ«åŒ–ã§æ€§èƒ½ãŒè½ã¡ãŸã‹ä¸æ˜
```

#### duo-talk-silly
```
æ§‹æˆ: KoboldCPP + SillyTavern
ç‰¹å¾´: 
  - Gemma2 Swallow 27B
  - Character Card V2
  - TTSçµ±åˆ
è©•ä¾¡: æŠ€è¡“æ¤œè¨¼ç”¨
èª²é¡Œ: ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã®å®šé‡æ¯”è¼ƒãªã—
```

---

## 2. è¨­è¨ˆæ–¹é‡

### 2.1 ã‚³ã‚¢ãƒ—ãƒªãƒ³ã‚·ãƒ—ãƒ«

1. **æ¸¬å®šå¯èƒ½æ€§ç¬¬ä¸€**
   - å…¨ã¦ã®åˆ¤æ–­ã¯æ¸¬å®šçµæœã«åŸºã¥ã
   - ã€Œãªã‚“ã¨ãªãè‰¯ã„ã€ã‚’æ’é™¤

2. **æ©Ÿèƒ½ã®ç‹¬ç«‹æ€§**
   - å„æ©Ÿèƒ½ã‚’ç‹¬ç«‹ã—ãŸã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦åˆ†é›¢
   - ON/OFFåˆ‡ã‚Šæ›¿ãˆã§åŠ¹æœã‚’æ¸¬å®š

3. **å†ç¾æ€§ã®ç¢ºä¿**
   - åŒã˜å…¥åŠ› â†’ åŒã˜å‡ºåŠ›
   - å®Ÿé¨“çµæœã®ä¿å­˜ã¨è¿½è·¡

4. **æ®µéšçš„ç§»è¡Œ**
   - æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä¿æŒ
   - æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¤œè¨¼
   - æˆåŠŸã—ãŸã‚‰çµ±åˆ

### 2.2 ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã®ç¯„å›²

```
ã€åˆ†é›¢ã™ã‚‹æ©Ÿèƒ½ã€‘
âœ“ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¯¾è©±ç”Ÿæˆï¼ˆã‚³ã‚¢ï¼‰
âœ“ Directorï¼ˆä¼šè©±åˆ¶å¾¡ï¼‰
âœ“ RAG/ãƒ¡ãƒ¢ãƒª
âœ“ è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
âœ“ GUIï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

ã€åˆ†é›¢ã—ãªã„ã‚‚ã®ã€‘
Ã— VLMï¼ˆFlorence-2ï¼‰ - ç¾åœ¨æœªä½¿ç”¨
Ã— JetRaceré€£æº - å¯¾è©±å®Ÿé¨“ã«ç„¡é–¢ä¿‚
```

---

## 3. å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
duo-talk-ecosystem/
â”‚
â”œâ”€â”€ duo-talk-evaluation/        # è©•ä¾¡ãƒ„ãƒ¼ãƒ«ï¼ˆPhase 0 - ç¾åœ¨å®Ÿè£…ä¸­ï¼‰
â”‚   â””â”€â”€ ç›®çš„: æ—¢å­˜3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®šé‡è©•ä¾¡
â”‚
â”œâ”€â”€ duo-talk-core/              # Phase 1: æœ€å°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¯¾è©±
â”‚   â””â”€â”€ ç›®çš„: ç´”ç²‹ãªå¯¾è©±æ€§èƒ½ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¢ºç«‹
â”‚
â”œâ”€â”€ duo-talk-director/          # Phase 2: Directoræ©Ÿèƒ½ï¼ˆç‹¬ç«‹ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
â”‚   â””â”€â”€ ç›®çš„: Directoræœ‰ç„¡ã§ã®æ€§èƒ½å·®æ¸¬å®š
â”‚
â”œâ”€â”€ duo-talk-rag/               # Phase 3: RAG/ãƒ¡ãƒ¢ãƒªï¼ˆç‹¬ç«‹ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
â”‚   â””â”€â”€ ç›®çš„: RAGæœ‰ç„¡ã§ã®æ€§èƒ½å·®æ¸¬å®š
â”‚
â”œâ”€â”€ duo-talk-gui/               # Phase 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â””â”€â”€ ç›®çš„: çµæœå¯è¦–åŒ–ã¨ãƒ‡ãƒ¢
â”‚
â””â”€â”€ duo-talk-integration/       # Phase 5: çµ±åˆã‚·ã‚¹ãƒ†ãƒ 
    â””â”€â”€ ç›®çš„: æœ€é©æ§‹æˆã®çµ±åˆç‰ˆ
```

### 3.2 ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—

```mermaid
graph TD
    A[duo-talk-evaluation] --> B[duo-talk-core]
    A --> C[duo-talk-simple]
    A --> D[duo-talk-silly]
    
    B --> E[duo-talk-director]
    B --> F[duo-talk-rag]
    
    E --> G[duo-talk-integration]
    F --> G
    B --> G
    
    H[duo-talk-gui] --> G
```

**ä¾å­˜ã®èª­ã¿æ–¹**:
- evaluation â†’ æ—¢å­˜3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è©•ä¾¡
- core â†’ Director, RAGã®åœŸå°
- Director, RAG â†’ coreã«æ©Ÿèƒ½è¿½åŠ 
- integration â†’ æœ€é©æ§‹æˆã®çµ±åˆ
- GUI â†’ çµæœã®å¯è¦–åŒ–

---

## 4. Phaseåˆ¥è©³ç´°è¨­è¨ˆ

### Phase 0: è©•ä¾¡åŸºç›¤ï¼ˆç¾åœ¨é€²è¡Œä¸­ï¼‰

#### ç›®çš„
æ—¢å­˜3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¯¾è©±å“è³ªã‚’å®šé‡è©•ä¾¡

#### ã‚¹ã‚³ãƒ¼ãƒ—
```
duo-talk-evaluation/
â”œâ”€â”€ src/evaluation/
â”‚   â”œâ”€â”€ metrics.py              # 5ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹å®šç¾©
â”‚   â”œâ”€â”€ evaluator.py            # è©•ä¾¡å™¨ï¼ˆGemini/Local LLMï¼‰
â”‚   â””â”€â”€ adapters/               # å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®æ¥ç¶š
â”‚       â”œâ”€â”€ duo_talk_adapter.py
â”‚       â”œâ”€â”€ duo_talk_simple_adapter.py
â”‚       â””â”€â”€ duo_talk_silly_adapter.py
â”œâ”€â”€ experiments/
â”‚   â””â”€â”€ compare_systems.py      # 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯”è¼ƒå®Ÿé¨“
â””â”€â”€ results/
    â”œâ”€â”€ YYYY-MM-DD_comparison.json
    â””â”€â”€ YYYY-MM-DD_comparison.md
```

#### æˆæœç‰©
1. **æ¯”è¼ƒãƒ¬ãƒãƒ¼ãƒˆ**
   - 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®šé‡ã‚¹ã‚³ã‚¢
   - ã©ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§å·®ãŒã‚ã‚‹ã‹
   - ã€Œãªãœduo-talkãŒè‰¯ã„ã®ã‹ã€ã®ä»®èª¬

2. **è©•ä¾¡ãƒ„ãƒ¼ãƒ«**
   - å†åˆ©ç”¨å¯èƒ½ãªè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 
   - ä»Šå¾Œã®å…¨Phaseã§ä½¿ç”¨

#### è¨­è¨ˆä¸Šã®æ±ºå®šäº‹é …

##### Q1: å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã©ã†ä¼šè©±ã‚’å–å¾—ã™ã‚‹ã‹ï¼Ÿ

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: APIçµŒç”±**
```
å‰æ: å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒHTTP APIã‚’æä¾›
æ–¹æ³•: POST /generate ã§ã‚¿ãƒ¼ãƒ³ç”Ÿæˆ
åˆ©ç‚¹: ã‚¯ãƒªãƒ¼ãƒ³ã€åˆ¶å¾¡ã—ã‚„ã™ã„
æ¬ ç‚¹: APIå®Ÿè£…ãŒå¿…è¦
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: CLIçµŒç”±**
```
å‰æ: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§å®Ÿè¡Œå¯èƒ½
æ–¹æ³•: subprocess ã§å‘¼ã³å‡ºã—
åˆ©ç‚¹: æ—¢å­˜ã®ã¾ã¾ä½¿ãˆã‚‹
æ¬ ç‚¹: å‡ºåŠ›ãƒ‘ãƒ¼ã‚¹ãŒå¿…è¦
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³C: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ãƒãƒ¼ãƒˆ**
```
å‰æ: Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦åˆ©ç”¨å¯èƒ½
æ–¹æ³•: from duo_talk import generate_dialogue
åˆ©ç‚¹: æœ€é€Ÿã€ç›´æ¥åˆ¶å¾¡
æ¬ ç‚¹: ä¾å­˜é–¢ä¿‚ã®ç«¶åˆãƒªã‚¹ã‚¯
```

**æ¨å¥¨**: ã¾ãšBï¼ˆCLIï¼‰ã§å®Ÿè£…ã€å¾Œã§Aã«ç§»è¡Œ

##### Q2: è©•ä¾¡ã‚·ãƒŠãƒªã‚ªã¯ã©ã†è¨­è¨ˆã™ã‚‹ã‹ï¼Ÿ

**ã‚·ãƒŠãƒªã‚ªè¨­è¨ˆ**:
```yaml
scenarios:
  - name: "casual_greeting"
    initial_prompt: "ãŠã¯ã‚ˆã†ã€äºŒäººã¨ã‚‚"
    turns: 5
    è©•ä¾¡è¦³ç‚¹: character_consistency, naturalness
    
  - name: "topic_exploration"
    initial_prompt: "æœ€è¿‘ã®AIæŠ€è¡“ã«ã¤ã„ã¦è©±ã—ã¦"
    turns: 8
    è©•ä¾¡è¦³ç‚¹: topic_novelty, concreteness
    
  - name: "disagreement_resolution"
    initial_prompt: "ç›´æ„Ÿã¨ãƒ‡ãƒ¼ã‚¿ã€ã©ã£ã¡ãŒå¤§äº‹ï¼Ÿ"
    turns: 10
    è©•ä¾¡è¦³ç‚¹: relationship_quality, naturalness
    
  - name: "emotional_support"
    initial_prompt: "æœ€è¿‘ç–²ã‚Œã¦ã‚‹ã‚“ã ..."
    turns: 6
    è©•ä¾¡è¦³ç‚¹: relationship_quality, naturalness
```

##### Q3: è©•ä¾¡ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ã©ã‚Œã‚’ä½¿ã†ã‹ï¼Ÿ

**æ±ºå®š**: ãƒ­ãƒ¼ã‚«ãƒ«LLMï¼ˆKoboldCPPï¼‰ã‚’å„ªå…ˆ
- Gemini APIã¯ã‚¯ã‚©ãƒ¼ã‚¿åˆ¶é™ãŒå³ã—ã„
- KoboldCPPï¼ˆGemma2 Swallowï¼‰ã¯ç„¡åˆ¶é™
- æ—¥æœ¬èªæ€§èƒ½ã‚‚åŒæ™‚ã«æ¤œè¨¼ã§ãã‚‹

---

### Phase 1: duo-talk-core æŠ½å‡º

#### ç›®çš„
ç´”ç²‹ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¯¾è©±æ©Ÿèƒ½ã®ã¿ã‚’æŠ½å‡ºã—ã€ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ€§èƒ½ã‚’ç¢ºç«‹

#### ã‚¹ã‚³ãƒ¼ãƒ—
```
duo-talk-core/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ character.py            # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ llm_client.py           # LLM APIæŠ½è±¡åŒ–
â”‚   â”œâ”€â”€ prompt_engine.py        # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
â”‚   â””â”€â”€ dialogue_manager.py     # ã‚¿ãƒ¼ãƒ³ç®¡ç†
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ yana.yaml               # ã‚„ãªè¨­å®šï¼ˆæ—¢å­˜ã‹ã‚‰ã‚³ãƒ”ãƒ¼ï¼‰
â”‚   â”œâ”€â”€ ayu.yaml                # ã‚ã‚†è¨­å®šï¼ˆæ—¢å­˜ã‹ã‚‰ã‚³ãƒ”ãƒ¼ï¼‰
â”‚   â””â”€â”€ llm_backend.yaml        # LLMãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¨­å®š
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_dialogue.py
â””â”€â”€ examples/
    â””â”€â”€ simple_dialogue.py      # ä½¿ç”¨ä¾‹
```

#### è¨­è¨ˆæ–¹é‡

##### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç‹¬ç«‹æ€§
```python
# å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç‹¬ç«‹å‹•ä½œå¯èƒ½
llm_client = LLMClient(backend="ollama", model="gemma3:12b")
prompt_engine = PromptEngine()
character_yana = Character.from_file("config/yana.yaml")

# å¤–éƒ¨ä¾å­˜ãªã—ï¼ˆDirector, RAG, GUIç„¡ã—ï¼‰
dialogue = character_yana.generate_response(
    user_input="ãŠã¯ã‚ˆã†",
    context=current_context
)
```

##### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é§†å‹•
```yaml
# config/yana.yaml
character:
  name: ã‚„ãª
  role: å§‰
  first_person: ç§
  personality:
    - ç›´æ„Ÿçš„
    - è¡Œå‹•æ´¾
  speech_patterns:
    endings: ["ã€œã‚", "ã€œã‹ã—ã‚‰"]

# æ—¢å­˜duo-talkã®persona/ã‹ã‚‰ç§»æ¤
# æ–°è¦ä½œæˆã¯ã—ãªã„
```

#### æˆæœç‰©
1. **ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ€§èƒ½**
   - Directorç„¡ã—ã€RAGç„¡ã—ã®ã‚¹ã‚³ã‚¢
   - ã€Œæœ€å°æ§‹æˆã§ã©ã“ã¾ã§ã„ã‘ã‚‹ã‹ã€ã®åŸºæº–

2. **å†åˆ©ç”¨å¯èƒ½ãªã‚³ã‚¢**
   - Phase 2ä»¥é™ã®åœŸå°
   - ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®çµ„ã¿è¾¼ã¿å¯èƒ½

#### è¨­è¨ˆä¸Šã®æ±ºå®šäº‹é …

##### Q1: æ—¢å­˜duo-talkã‹ã‚‰ä½•ã‚’æŠ½å‡ºã™ã‚‹ã‹ï¼Ÿ

**æŠ½å‡ºã™ã‚‹ã‚‚ã®**:
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpersona/*.yamlï¼‰
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
- LLM APIå‘¼ã³å‡ºã—éƒ¨åˆ†

**æŠ½å‡ºã—ãªã„ã‚‚ã®**:
- GUIé–¢é€£ï¼ˆReact/Flaskï¼‰
- Directoræ©Ÿèƒ½
- ChromaDBçµ±åˆ
- å®Ÿè¡Œãƒ‘ã‚¹åˆ¶å¾¡ï¼ˆRUNS/LIVEï¼‰

**å®Ÿè£…æ–¹æ³•**:
1. æ—¢å­˜duo-talkã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§
2. æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã‚’æ–°è¦ä½œæˆ
3. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚³ãƒ”ãƒ¼ï¼ˆæ”¹å¤‰ãªã—ï¼‰

##### Q2: LLMãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é¸æŠã¯ï¼Ÿ

**ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**:
```yaml
backends:
  ollama:
    base_url: "http://localhost:11434"
    models: ["gemma3:12b", "cydonia-22b"]
  
  koboldcpp:
    base_url: "http://localhost:5001"
    models: ["gemma2-swallow-27b"]
  
  vllm:
    base_url: "http://localhost:8000"
    models: ["gemma-3-12b-it-quantized"]
```

**åˆ‡ã‚Šæ›¿ãˆæ–¹æ³•**: ç’°å¢ƒå¤‰æ•°ã¾ãŸã¯config/llm_backend.yaml

---

### Phase 2: duo-talk-director åˆ†é›¢

#### ç›®çš„
Directoræ©Ÿèƒ½ã‚’ç‹¬ç«‹ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã—ã€æœ‰ç„¡ã§ã®æ€§èƒ½å·®ã‚’æ¸¬å®š

#### ã‚¹ã‚³ãƒ¼ãƒ—
```
duo-talk-director/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ director.py             # Directoræœ¬ä½“
â”‚   â”œâ”€â”€ rules.py                # ä»‹å…¥ãƒ«ãƒ¼ãƒ«
â”‚   â””â”€â”€ api.py                  # HTTP API (FastAPI)
â”œâ”€â”€ config/
â”‚   â””â”€â”€ rules.yaml              # ä»‹å…¥ãƒ«ãƒ¼ãƒ«è¨­å®š
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_director.py
â””â”€â”€ examples/
    â””â”€â”€ director_client.py      # ä½¿ç”¨ä¾‹
```

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
duo-talk-core                duo-talk-director
     â†“                              â†“
  ä¼šè©±ç”Ÿæˆ        â†’      Directoråˆ¤å®š      â†’   ä»‹å…¥ãŒå¿…è¦ï¼Ÿ
     â†“                              â†“
  å¿œç­”è¿”å´        â†      ä¿®æ­£æŒ‡ç¤º/æ‰¿èª      â†   Yes/No
```

##### Director APIè¨­è¨ˆ
```python
# POST /check_intervention
Request:
{
    "conversation": [
        {"speaker": "ã‚„ãª", "content": "..."},
        {"speaker": "ã‚ã‚†", "content": "..."}
    ],
    "signals": {
        "loop_detected": false,
        "silence_duration": 0,
        "last_speaker": "ã‚ã‚†"
    }
}

Response (ä»‹å…¥ä¸è¦):
{
    "intervention_needed": false
}

Response (ä»‹å…¥å¿…è¦):
{
    "intervention_needed": true,
    "type": "loop_break",
    "instruction": "å…·ä½“çš„ãªæ•°å€¤ã‚„å ´æ‰€ã‚’1ã¤å‡ºã—ã¦ãã ã•ã„",
    "target_character": "ã‚„ãª"
}
```

#### å®Ÿé¨“è¨­è¨ˆ

##### A/Bãƒ†ã‚¹ãƒˆ
```
å®Ÿé¨“A: Director OFF
  â†’ duo-talk-coreå˜ä½“ã§ä¼šè©±ç”Ÿæˆ
  â†’ è©•ä¾¡ã‚¹ã‚³ã‚¢å–å¾—

å®Ÿé¨“B: Director ON
  â†’ duo-talk-core + duo-talk-director
  â†’ è©•ä¾¡ã‚¹ã‚³ã‚¢å–å¾—

æ¯”è¼ƒ:
  - å„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å·®
  - ä»‹å…¥é »åº¦ã¨åŠ¹æœã®ç›¸é–¢
  - ã©ã®ä»‹å…¥ã‚¿ã‚¤ãƒ—ãŒæœ‰åŠ¹ã‹
```

#### æˆæœç‰©
1. **DirectoråŠ¹æœãƒ¬ãƒãƒ¼ãƒˆ**
   - Directoræœ‰ç„¡ã§ã®ã‚¹ã‚³ã‚¢å·®
   - æœ‰åŠ¹ãªä»‹å…¥ãƒ«ãƒ¼ãƒ«
   - ä¸è¦ãªä»‹å…¥ãƒ«ãƒ¼ãƒ«

2. **è¨­è¨ˆçŸ¥è¦‹**
   - Directorã‚’å…¥ã‚Œã‚‹ã¹ãã‹
   - ã©ã®ãƒ«ãƒ¼ãƒ«ãŒæœ¬å½“ã«åŠ¹ãã‹

#### è¨­è¨ˆä¸Šã®æ±ºå®šäº‹é …

##### Q1: ä»‹å…¥ãƒ«ãƒ¼ãƒ«ã‚’ã©ã†å®šç¾©ã™ã‚‹ã‹ï¼Ÿ

**ãƒ«ãƒ¼ãƒ«ä¾‹**:
```yaml
rules:
  loop_prevention:
    trigger:
      - same_topic_3turns: true
    action:
      type: "inject_instruction"
      instruction: "å…·ä½“ä¾‹ã‚’1ã¤å‡ºã—ã¦ãã ã•ã„"
    priority: high
  
  silence_avoidance:
    trigger:
      - no_response_5sec: true
    action:
      type: "prompt_continuation"
      instruction: "ç¾åœ¨ã®çŠ¶æ³ã‚’èª¬æ˜ã—ã¦ãã ã•ã„"
    priority: medium
  
  character_consistency:
    trigger:
      - wrong_first_person: true
    action:
      type: "reject_response"
      instruction: "ä¸€äººç§°ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„"
    priority: high
```

##### Q2: ä»‹å…¥é »åº¦ã®åˆ¶å¾¡ã¯ï¼Ÿ

**å•é¡Œ**: ã€Œæ¯ã‚¿ãƒ¼ãƒ³ä»‹å…¥ç—…ã€ã‚’é˜²ã

**è§£æ±ºç­–**:
```python
class Director:
    def __init__(self):
        self.intervention_cooldown = 3  # 3ã‚¿ãƒ¼ãƒ³ã¯ä»‹å…¥ã—ãªã„
        self.last_intervention_turn = -999
        
    def should_intervene(self, current_turn):
        if current_turn - self.last_intervention_turn < self.intervention_cooldown:
            return False  # ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­
        # ãã®ä»–ã®åˆ¤å®š...
```

---

### Phase 3: duo-talk-rag åˆ†é›¢

#### ç›®çš„
RAG/ãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã‚’ç‹¬ç«‹ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã—ã€æœ‰ç„¡ã§ã®æ€§èƒ½å·®ã‚’æ¸¬å®š

#### ã‚¹ã‚³ãƒ¼ãƒ—
```
duo-talk-rag/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ memory_manager.py       # ãƒ¡ãƒ¢ãƒªç®¡ç†
â”‚   â”œâ”€â”€ chromadb_client.py      # ChromaDBæ“ä½œ
â”‚   â””â”€â”€ api.py                  # HTTP API
â”œâ”€â”€ config/
â”‚   â””â”€â”€ memory.yaml             # ãƒ¡ãƒ¢ãƒªè¨­å®š
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_rag.py
â””â”€â”€ data/
    â””â”€â”€ embeddings/             # ãƒ™ã‚¯ãƒˆãƒ«DBä¿å­˜å…ˆ
```

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
duo-talk-core           duo-talk-rag
     â†“                       â†“
  ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›   â†’   é–¢é€£è¨˜æ†¶æ¤œç´¢    â†’   é¡ä¼¼è¨˜æ†¶å–å¾—
     â†“                       â†“
  ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ  â†   è¨˜æ†¶å†…å®¹æ³¨å…¥    â†   Top-Kçµæœ
     â†“
  LLMç”Ÿæˆ
```

##### RAG APIè¨­è¨ˆ
```python
# POST /search_memory
Request:
{
    "query": "æœ€è¿‘ã®AIæŠ€è¡“",
    "character": "ã‚„ãª",
    "top_k": 3
}

Response:
{
    "memories": [
        {
            "content": "å¼·åŒ–å­¦ç¿’ã«ã¤ã„ã¦å‹‰å¼·ã—ãŸ",
            "timestamp": "2026-01-20T10:00:00",
            "relevance_score": 0.89
        },
        ...
    ]
}

# POST /store_memory
Request:
{
    "content": "ä»Šæ—¥ã¯Transformerã«ã¤ã„ã¦å­¦ã‚“ã ",
    "character": "ã‚ã‚†",
    "metadata": {
        "topic": "AIæŠ€è¡“",
        "emotion": "excited"
    }
}
```

#### å®Ÿé¨“è¨­è¨ˆ

##### A/Bãƒ†ã‚¹ãƒˆ
```
å®Ÿé¨“A: RAG OFF
  â†’ ä¼šè©±å±¥æ­´ã®ã¿ã§ç”Ÿæˆ
  â†’ è©•ä¾¡ã‚¹ã‚³ã‚¢

å®Ÿé¨“B: RAG ON
  â†’ éå»ã®è¨˜æ†¶ã‚‚å‚ç…§ã—ã¦ç”Ÿæˆ
  â†’ è©•ä¾¡ã‚¹ã‚³ã‚¢

æ¯”è¼ƒ:
  - æ–‡è„ˆã®ä¸€è²«æ€§ï¼ˆtopic_noveltyé€†èª¬çš„ã«ä½ä¸‹ï¼Ÿï¼‰
  - å…·ä½“æ€§ã®å‘ä¸Šï¼ˆconcretenesså‘ä¸Šï¼Ÿï¼‰
  - ã€Œåˆè€³å•é¡Œã€ã®ç™ºç”Ÿç‡
```

#### æˆæœç‰©
1. **RAGåŠ¹æœãƒ¬ãƒãƒ¼ãƒˆ**
   - RAGæœ‰ç„¡ã§ã®ã‚¹ã‚³ã‚¢å·®
   - ã©ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«åŠ¹ãã‹
   - è¨˜æ†¶ã®é®®åº¦ã¨åŠ¹æœã®é–¢ä¿‚

2. **è¨­è¨ˆçŸ¥è¦‹**
   - RAGã¯æœ¬å½“ã«å¿…è¦ã‹
   - æ¤œç´¢ä»¶æ•°ï¼ˆtop_kï¼‰ã®æœ€é©å€¤

#### è¨­è¨ˆä¸Šã®æ±ºå®šäº‹é …

##### Q1: è¨˜æ†¶ã®ç²’åº¦ã¯ï¼Ÿ

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
- ã‚¿ãƒ¼ãƒ³å˜ä½: 1å¿œç­” = 1è¨˜æ†¶
- ä¼šè©±å˜ä½: 1ã‚»ãƒƒã‚·ãƒ§ãƒ³ = 1è¨˜æ†¶
- ãƒˆãƒ”ãƒƒã‚¯å˜ä½: 1è©±é¡Œ = 1è¨˜æ†¶

**æ¨å¥¨**: ãƒˆãƒ”ãƒƒã‚¯å˜ä½ï¼ˆè¦ç´„ã—ã¦ä¿å­˜ï¼‰

##### Q2: è¨˜æ†¶ã®ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯ï¼Ÿ

**å•é¡Œ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›¸ãè¾¼ã¿ã¯VRAMåœ§è¿«

**è§£æ±ºç­–**:
```python
class MemoryManager:
    def __init__(self):
        self.write_buffer = []
        
    def buffer_memory(self, memory):
        """èµ°è¡Œä¸­ã¯ãƒãƒƒãƒ•ã‚¡ã«æºœã‚ã‚‹"""
        self.write_buffer.append(memory)
        
    def flush_to_db(self):
        """èµ°è¡Œå¾Œã«ã¾ã¨ã‚ã¦æ›¸ãè¾¼ã¿"""
        for memory in self.write_buffer:
            self.db.add(memory)
        self.write_buffer.clear()
```

---

### Phase 4: duo-talk-gui åˆ†é›¢

#### ç›®çš„
çµæœå¯è¦–åŒ–ã¨ãƒ‡ãƒ¢ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

#### ã‚¹ã‚³ãƒ¼ãƒ—
```
duo-talk-gui/
â”œâ”€â”€ frontend/                   # React/TypeScript
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MetricsDisplay.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ComparisonView.tsx
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ client.ts
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ backend/                    # FastAPI
â”‚   â””â”€â”€ api.py
â””â”€â”€ docker-compose.yml
```

#### æ©Ÿèƒ½è¦ä»¶

##### åŸºæœ¬æ©Ÿèƒ½
1. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯¾è©±**
   - ã‚„ãªãƒ»ã‚ã‚†ã¨ãƒãƒ£ãƒƒãƒˆ
   - å¿œç­”ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è¡¨ç¤º

2. **è©•ä¾¡çµæœè¡¨ç¤º**
   - 5ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹å¯è¦–åŒ–ï¼ˆãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼‰
   - ã‚¿ãƒ¼ãƒ³ã”ã¨ã®ã‚¹ã‚³ã‚¢æ¨ç§»

3. **æ¯”è¼ƒãƒ“ãƒ¥ãƒ¼**
   - 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸¦åˆ—è¡¨ç¤º
   - ã‚¹ã‚³ã‚¢å·®ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ

##### éæ©Ÿèƒ½è¦ä»¶
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 2ç§’ä»¥å†…
- å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶: Chrome/Firefoxæœ€æ–°ç‰ˆ
- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ: ä¸è¦ï¼ˆPCå°‚ç”¨ï¼‰

#### å„ªå…ˆåº¦
**Priority: Low**ï¼ˆPhase 5å¾Œã§ã‚‚å¯ï¼‰

ç†ç”±:
- è©•ä¾¡å®Ÿé¨“ã«GUIã¯ä¸è¦
- ã‚¿ãƒ¼ãƒŸãƒŠãƒ« + Markdownãƒ¬ãƒãƒ¼ãƒˆã§ååˆ†
- ãƒªã‚½ãƒ¼ã‚¹ã‚’å®Ÿé¨“ã«é›†ä¸­ã™ã¹ã

---

### Phase 5: duo-talk-integration çµ±åˆ

#### ç›®çš„
Phase 0-4ã®çµæœã«åŸºã¥ãã€æœ€é©æ§‹æˆã‚’çµ±åˆ

#### å‰ææ¡ä»¶
```
Phase 0å®Œäº†: ã©ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒè‰¯ã„ã‹åˆ¤æ˜
Phase 1å®Œäº†: ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ€§èƒ½ç¢ºç«‹
Phase 2å®Œäº†: DirectoråŠ¹æœæ¸¬å®šæ¸ˆã¿
Phase 3å®Œäº†: RAGåŠ¹æœæ¸¬å®šæ¸ˆã¿
```

#### çµ±åˆæ–¹é‡

##### ã‚·ãƒŠãƒªã‚ªA: DirectorãŒæœ‰åŠ¹ã€RAGã‚‚æœ‰åŠ¹
```
duo-talk-integration/
â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ core (ãƒ™ãƒ¼ã‚¹)
â”‚   â”œâ”€â”€ director (æœ‰åŠ¹)
â”‚   â”œâ”€â”€ rag (æœ‰åŠ¹)
â”‚   â””â”€â”€ gui (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
â””â”€â”€ config/
    â””â”€â”€ optimal.yaml            # æœ€é©ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
```

##### ã‚·ãƒŠãƒªã‚ªB: Directorã®ã¿æœ‰åŠ¹
```
çµ±åˆå†…å®¹:
  - core + director
  - RAGã¯ç„¡åŠ¹ï¼ˆåŠ¹æœãªã—ã¨åˆ¤æ˜ï¼‰
```

##### ã‚·ãƒŠãƒªã‚ªC: å…¨ã¦ç„¡åŠ¹ï¼ˆcoreã®ã¿ãŒæœ€é©ï¼‰
```
çµ±åˆå†…å®¹:
  - duo-talk-core ãŒãã®ã¾ã¾æœ€çµ‚å½¢
  - Director, RAGã¯å‰Šé™¤
```

**é‡è¦**: å®Ÿé¨“çµæœãŒæ±ºå®šã™ã‚‹ï¼ˆäºˆæ–­ã‚’æŒãŸãªã„ï¼‰

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 5.1 è©•ä¾¡å®Ÿé¨“ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. ã‚·ãƒŠãƒªã‚ªå®šç¾©
   â†“
2. SystemAdapter
   - å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆæœŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡
   - N ã‚¿ãƒ¼ãƒ³ä¼šè©±ç”Ÿæˆ
   â†“
3. ä¼šè©±ãƒ­ã‚°ä¿å­˜ (JSON)
   â†“
4. Evaluator
   - ãƒ­ãƒ¼ã‚«ãƒ«LLM ã¾ãŸã¯ Gemini
   - 5ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç®—å‡º
   â†“
5. çµæœä¿å­˜ (JSON)
   â†“
6. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ (Markdown)
```

### 5.2 ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡

```
[duo-talk-core]
    â†“ HTTP POST /generate
    â†“ {user_input, conversation_history}
    â†“
[duo-talk-director]
    â†“ HTTP POST /check
    â†“ {intervention_needed, instruction}
    â†“
[duo-talk-core]
    â†“ ä¿®æ­£ã¾ãŸã¯æ‰¿èª
    â†“ HTTP POST /search
[duo-talk-rag]
    â†“ {memories: [...]}
    â†“
[duo-talk-core]
    â†“ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ â†’ LLMå‘¼ã³å‡ºã—
    â†“
[Response]
```

---

## 6. å®Ÿè£…å„ªå…ˆé †ä½ã¨ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### Week 1-2: Phase 0å®Œæˆ

```
ã‚¿ã‚¹ã‚¯:
âœ“ LocalLLMEvaluatorå®Ÿè£…
âœ“ SystemAdapterå®Ÿè£…ï¼ˆ3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
âœ“ æ¯”è¼ƒå®Ÿé¨“å®Ÿè¡Œ
âœ“ ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

æˆæœç‰©:
- comparison_report.md
- ã€Œãªãœduo-talkãŒè‰¯ã„ã®ã‹ã€ã®ä»®èª¬
```

### Week 3-4: Phase 1å®Ÿè£…

```
ã‚¿ã‚¹ã‚¯:
- duo-talk-coreè¨­è¨ˆ
- æ—¢å­˜duo-talkã‹ã‚‰ã‚³ãƒ¼ãƒ‰æŠ½å‡º
- ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³è©•ä¾¡

æˆæœç‰©:
- duo-talk-core (å‹•ä½œç‰ˆ)
- baseline_report.md
```

### Week 5-6: Phase 2å®Ÿè£…

```
ã‚¿ã‚¹ã‚¯:
- duo-talk-directoråˆ†é›¢
- A/Bãƒ†ã‚¹ãƒˆå®Ÿæ–½
- DirectoråŠ¹æœæ¸¬å®š

æˆæœç‰©:
- director_effect_report.md
- æœ‰åŠ¹ãªãƒ«ãƒ¼ãƒ«ãƒªã‚¹ãƒˆ
```

### Week 7-8: Phase 3å®Ÿè£…

```
ã‚¿ã‚¹ã‚¯:
- duo-talk-ragåˆ†é›¢
- A/Bãƒ†ã‚¹ãƒˆå®Ÿæ–½
- RAGåŠ¹æœæ¸¬å®š

æˆæœç‰©:
- rag_effect_report.md
- æœ€é©top_kå€¤
```

### Week 9-10: Phase 5çµ±åˆ

```
ã‚¿ã‚¹ã‚¯:
- æœ€é©æ§‹æˆã®çµ±åˆ
- ç·åˆè©•ä¾¡
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

æˆæœç‰©:
- duo-talk-integration
- æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆ
```

**Phase 4ï¼ˆGUIï¼‰ã¯å¾Œå›ã—**ï¼ˆå®Ÿé¨“ã«å½±éŸ¿ã—ãªã„ï¼‰

---

## 7. æŠ€è¡“é¸å®š

### 7.1 é–‹ç™ºç’°å¢ƒ

| é …ç›® | é¸å®š | ç†ç”± |
|------|------|------|
| è¨€èª | Python 3.12 | æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨çµ±ä¸€ |
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† | conda | GPUç’°å¢ƒã¨ã®è¦ªå’Œæ€§ |
| ãƒ†ã‚¹ãƒˆ | pytest | TDDå®Ÿè£…ã«é©ã—ã¦ã„ã‚‹ |
| API | FastAPI | è»½é‡ã€å‹å®‰å…¨ |
| ãƒ‡ãƒ¼ã‚¿ä¿å­˜ | JSON + Markdown | å¯èª­æ€§ã¨å†åˆ©ç”¨æ€§ |

### 7.2 LLMãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | ç”¨é€” | å„ªå…ˆåº¦ |
|-------------|------|--------|
| KoboldCPP | è©•ä¾¡å™¨ã€å®Ÿé¨“ | æœ€å„ªå…ˆ |
| Ollama | æ—¢å­˜äº’æ› | ä¸­ |
| vLLM | é€Ÿåº¦é‡è¦– | ä½ |
| Gemini API | è©•ä¾¡å™¨ï¼ˆè£œåŠ©ï¼‰ | ä½ |

---

## 8. ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

### 8.1 æŠ€è¡“ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | å¯¾ç­– |
|--------|------|------|
| SystemAdapterå®Ÿè£…å›°é›£ | è©•ä¾¡å®Ÿé¨“ãŒã§ããªã„ | ã¾ãšCLIçµŒç”±ã§å®Ÿè£…ã€APIåŒ–ã¯å¾Œå›ã— |
| LLMè©•ä¾¡ã®ç²¾åº¦ä¸è¶³ | åˆ¤æ–­ã‚’èª¤ã‚‹ | è¤‡æ•°è©•ä¾¡å™¨ã§ç›¸äº’æ¤œè¨¼ |
| VRAMä¸è¶³ | å®Ÿé¨“ã§ããªã„ | ã‚µãƒ¼ãƒ“ã‚¹é †æ¬¡èµ·å‹•ã€ãƒãƒƒãƒå‡¦ç† |
| æ—¢å­˜ã‚³ãƒ¼ãƒ‰è§£èª­å›°é›£ | æŠ½å‡ºã«æ™‚é–“ | å¿…è¦æœ€å°é™ã®æ–°è¦å®Ÿè£…ã‚‚è¨±å®¹ |

### 8.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | å¯¾ç­– |
|--------|------|------|
| ã‚¹ã‚³ãƒ¼ãƒ—ã‚¯ãƒªãƒ¼ãƒ— | å®Œæˆã—ãªã„ | Phaseå˜ä½ã§æ˜ç¢ºãªæˆæœç‰© |
| äºˆæœŸã›ã¬çµæœ | è¨ˆç”»å¤‰æ›´ | æŸ”è»Ÿãªè¨­è¨ˆã€çµæœã«åŸºã¥ãåˆ¤æ–­ |
| å·¥æ•°è¶…é | å®Œæˆé…å»¶ | Phase 4ï¼ˆGUIï¼‰ã¯å‰Šé™¤å¯èƒ½ |

---

## 9. æˆåŠŸåŸºæº–

### 9.1 Phase 0æˆåŠŸåŸºæº–

- [ ] 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§åŒä¸€ã‚·ãƒŠãƒªã‚ªå®Ÿè¡Œ
- [ ] 5ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§å®šé‡è©•ä¾¡
- [ ] ã‚¹ã‚³ã‚¢å·®ã®çµ±è¨ˆçš„æœ‰æ„æ€§ç¢ºèª
- [ ] ã€Œãªãœduo-talkãŒè‰¯ã„ã®ã‹ã€ã®ä»®èª¬3ã¤ä»¥ä¸Š

### 9.2 Phase 1æˆåŠŸåŸºæº–

- [ ] duo-talk-coreå˜ä½“å‹•ä½œ
- [ ] æ—¢å­˜duo-talkã¨ã®è©•ä¾¡ã‚¹ã‚³ã‚¢å·®Â±10%ä»¥å†…
- [ ] ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ€§èƒ½ã®å®šé‡åŒ–

### 9.3 Phase 2/3æˆåŠŸåŸºæº–

- [ ] Director/RAGæœ‰ç„¡ã§ã®ã‚¹ã‚³ã‚¢å·®æ¸¬å®š
- [ ] çµ±è¨ˆçš„æœ‰æ„æ€§ç¢ºèªï¼ˆtæ¤œå®š p<0.05ï¼‰
- [ ] åŠ¹æœã‚ã‚Šã®åˆ¤å®šåŸºæº–æ˜ç¢ºåŒ–

### 9.4 æœ€çµ‚æˆåŠŸåŸºæº–

- [ ] ã€Œä½•ãŒåŠ¹ã„ã¦ã„ã‚‹ã‹ã€ã®å®šé‡çš„æ ¹æ‹ 
- [ ] æœ€é©æ§‹æˆã®å®Ÿè£…
- [ ] å†ç¾å¯èƒ½ãªè©•ä¾¡æ‰‹æ³•ã®ç¢ºç«‹

---

## 10. Out of Scopeï¼ˆã‚„ã‚‰ãªã„ã“ã¨ï¼‰

### 10.1 æŠ€è¡“çš„Scopeå¤–

- âŒ VLMï¼ˆFlorence-2ï¼‰çµ±åˆ - ç¾åœ¨æœªä½¿ç”¨
- âŒ JetRaceré€£æº - å¯¾è©±å®Ÿé¨“ã«ç„¡é–¢ä¿‚
- âŒ TTS/STTå®Ÿè£… - è©•ä¾¡ã«å½±éŸ¿ã—ãªã„
- âŒ æ–°ã—ã„LLMãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ - æ—¢å­˜ãƒ¢ãƒ‡ãƒ«ã§ååˆ†

### 10.2 æ©Ÿèƒ½çš„Scopeå¤–

- âŒ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©ã®æ”¹å–„ - æ—¢å­˜ã‚’ä½¿ç”¨
- âŒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚° - è©•ä¾¡ãŒãƒ¡ã‚¤ãƒ³
- âŒ æ–°ã—ã„Directorãƒ«ãƒ¼ãƒ«é–‹ç™º - åŠ¹æœæ¸¬å®šãŒå…ˆ
- âŒ RAGçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã®æ‹¡å…… - åŠ¹æœæ¸¬å®šãŒå…ˆ

### 10.3 å„ªå…ˆåº¦ä½ï¼ˆå¾Œå›ã—ï¼‰

- ğŸ”½ GUIå®Ÿè£… - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ååˆ†
- ğŸ”½ ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ - PCå°‚ç”¨ã§å¯
- ğŸ”½ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– - å‹•ä½œå„ªå…ˆ
- ğŸ”½ å¤šè¨€èªå¯¾å¿œ - æ—¥æœ¬èªã®ã¿

---

## 11. æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### ä»Šã™ãå®Ÿè¡Œ

1. **Phase 0å®Œæˆã‚’å¾…ã¤**
   - `/tdd`ã§LocalLLMEvaluatorå®Ÿè£…ä¸­
   - å®Œäº†ã‚’ç¢ºèª

2. **SystemAdapterè¨­è¨ˆ**
   - `/plan`ã§æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®æ¥ç¶šæ–¹æ³•è¨­è¨ˆ
   - CLI/API/ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ã©ã‚Œã§æ¥ç¶šã™ã‚‹ã‹æ±ºå®š

3. **æ¯”è¼ƒå®Ÿé¨“å®Ÿè¡Œ**
   - 4ã¤ã®ã‚·ãƒŠãƒªã‚ªã§3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©•ä¾¡
   - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

### Phase 1ç§»è¡Œã®åˆ¤æ–­

Phase 0ã®çµæœã‚’è¦‹ã¦ã‹ã‚‰åˆ¤æ–­ï¼š

```
IF 3ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å·®ãŒå°ã•ã„:
  â†’ Phase 1ä¸è¦ã€æ—¢å­˜æ”¹å–„ã«æ³¨åŠ›
  
IF duo-talkãŒæ˜ç¢ºã«å„ªä½:
  â†’ Phase 1-5å®Ÿè¡Œã€ä½•ãŒåŠ¹ã„ã¦ã„ã‚‹ã‹ç‰¹å®š
  
IF äºˆæœŸã›ã¬çµæœ:
  â†’ è¨­è¨ˆè¦‹ç›´ã—
```

---

