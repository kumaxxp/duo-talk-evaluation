# v3.7 Direct Dialogue Enforcement 実験設定 (Gemma3 12B)
#
# v3.7の核心: 「名前を出力させない（発言内容のみ出力）」
# - Prompt: Few-shot例から名前表記を削除、`Output: 「...」` 形式に統一
# - Implementation: Output強制時のPrefillを `\nOutput: 「` に変更

experiment:
  id: "exp_prompt_v37_gemma3_001"
  name: "v3.7プロンプト検証 (Gemma3): Direct Dialogue Enforcement"
  description: "v3.6の「澄ヶ瀬」で止まる問題をv3.7で解決"

base_config:
  llm_backend: "ollama"
  rag_enabled: false
  director_enabled: false
  few_shot_count: 3
  use_v37_flow: true
  scenarios:
    - casual_greeting
    - direct_interaction_test
    - subjective_thought_test
    - zero_distance_test
    - output_completion_test

variations:
  - name: "gemma3_json_v37"
    llm_backend: "ollama"
    llm_model: "gemma3:12b"
    prompt_structure: "json"
    ollama_model: "gemma3:12b"
    temperature: 0.7
    use_v37_flow: true

scenario_definitions:
  casual_greeting:
    prompt: "おはよう、二人とも。今日も元気？"
    turns: 5
    evaluation_focus:
      - character_consistency
      - naturalness
      - dialogue_content_rate  # v3.7: 対話内容が生成されるか

  direct_interaction_test:
    prompt: "GPUをもう一枚買おうと思うんだけど、どう思う？"
    turns: 6
    evaluation_focus:
      - direct_addressing_rate
      - narration_avoidance_rate
      - dialogue_content_rate

  subjective_thought_test:
    prompt: "JetRacerが動かなくなった。"
    turns: 6
    evaluation_focus:
      - subjective_thought_quality
      - thought_process_usage
      - dialogue_content_rate

  zero_distance_test:
    prompt: "今夜は飲みに行こうか！"
    turns: 6
    evaluation_focus:
      - direct_addressing_rate
      - naturalness
      - relationship_quality
      - dialogue_content_rate

  output_completion_test:
    prompt: "難しい技術的な問題があるんだけど、ゼロから考えてみて"
    turns: 4
    evaluation_focus:
      - dialogue_content_rate
      - thought_process_usage
      - character_consistency
