# v3.4プロンプト検証実験 (Gemma3版)
# Zero Distance対話ルールと主観的思考パターンの効果を検証

experiment:
  id: "exp_prompt_v34_gemma3_001"
  name: "v3.4プロンプト検証 (Gemma3): Zero Distance対話と主観化"
  description: |
    v3.4プロンプト改良の効果をGemma3 12Bで検証する。
    v3.3で発生した「観察者効果」「メール的距離感」の解消を確認。

base_config:
  llm_backend: "ollama"
  rag_enabled: false
  director_enabled: false
  few_shot_count: 3
  scenarios:
    - casual_greeting
    - direct_interaction_test
    - subjective_thought_test
    - zero_distance_test

variations:
  # Gemma3 12B + JSON構造（v3.4）
  - name: "gemma3_json_v34"
    prompt_structure: "json"
    ollama_model: "gemma3:12b"
    temperature: 0.7

  # Gemma3 12B + JSON構造（v3.3比較用）
  - name: "gemma3_json_v33"
    prompt_structure: "json"
    ollama_model: "gemma3:12b"
    temperature: 0.7
    # Note: v3.3相当の設定（conversation_rule無効化）

metrics:
  - character_consistency
  - naturalness
  - relationship_quality
  - thought_process_usage
  - direct_addressing_rate      # NEW: 直接呼びかけ率
  - narration_avoidance_rate    # NEW: ナレーション回避率
  - subjective_thought_quality  # NEW: 主観的思考品質

scenario_definitions:
  casual_greeting:
    prompt: "おはよう、二人とも。今日も元気？"
    turns: 5
    evaluation_focus:
      - character_consistency
      - naturalness
      - direct_addressing_rate

  direct_interaction_test:
    prompt: "GPUをもう一枚買おうと思うんだけど、どう思う？"
    turns: 6
    evaluation_focus:
      - direct_addressing_rate
      - narration_avoidance_rate
      - relationship_quality

  subjective_thought_test:
    prompt: "JetRacerが動かなくなった。"
    turns: 6
    evaluation_focus:
      - subjective_thought_quality
      - thought_process_usage
      - character_consistency

  zero_distance_test:
    prompt: "今夜は飲みに行こうか！"
    turns: 6
    evaluation_focus:
      - direct_addressing_rate
      - naturalness
      - relationship_quality
