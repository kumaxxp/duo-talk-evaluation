---
name: save-spec
description: Geminiなどから取得した情報をフェーズに合わせた仕様書として保存する。ユーザーがコピペした内容を整形してマークダウン化し、specs/ディレクトリに保存する。
---

# 仕様書保存スキル

ユーザーがGeminiやその他の情報源から取得した内容を、プロジェクトの仕様書として整形・保存します。

## 使用タイミング

- ユーザーが「Geminiからの情報」「仕様として保存」などと言った時
- 技術的な情報や設計情報をコピペした時
- `/save-spec` コマンドを実行した時

## 実行手順

### 1. 情報の分類

ユーザーから提供された情報を以下のカテゴリに分類:

| カテゴリ | 保存先 | ファイル名規則 |
|---------|--------|---------------|
| フェーズ仕様 | `specs/phases/` | `PHASE{N}_{TOPIC}.md` |
| アーキテクチャ | `specs/architecture/` | `ARCH_{TOPIC}.md` |
| 実験設計 | `specs/experiments/` | `EXP_{TOPIC}.md` |
| API仕様 | `specs/api/` | `API_{SERVICE}.md` |
| その他 | `specs/misc/` | `MISC_{TOPIC}.md` |

### 2. ファイル名の決定

```
例:
- Phase 2のDirector仕様 → specs/phases/PHASE2_DIRECTOR_SPEC.md
- Ollama APIの仕様 → specs/api/API_OLLAMA.md
- 評価メトリクスの設計 → specs/architecture/ARCH_EVALUATION_METRICS.md
```

### 3. 内容の整形

以下のテンプレートに従って整形:

```markdown
# 仕様書: {タイトル}

**文書ID**: {YYYYMMDD}_{連番}
**作成日**: {今日の日付}
**フェーズ**: {該当フェーズ}
**ステータス**: Draft / Review / Approved
**情報源**: Gemini / Web検索 / ユーザー入力 / その他

---

## 概要

{1-2文で要約}

---

## 背景と目的

{なぜこの仕様が必要か}

---

## 詳細仕様

{整形されたコンテンツ本体}

---

## 実装要件

{実装時に必要な要件があれば}

---

## 関連文書

- {関連する他の仕様書へのリンク}

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| {今日} | 1.0 | 初版作成 |

---

*Source: {情報源}*
```

### 4. コード・JSONの整形

情報にコードやJSONが含まれる場合:

- 適切な言語タグを付けてコードブロック化
- インデントを整える
- 必要に応じてコメントを追加

```python
# 例: Pythonコードの整形
def example_function():
    """ドキュメント文字列を追加"""
    pass
```

### 5. 保存と確認

1. ファイルを作成
2. 内容をユーザーに表示
3. 必要に応じて修正

## 出力フォーマット

保存完了後、以下を報告:

```
✅ 仕様書を保存しました

📄 ファイル: specs/phases/PHASE2_DIRECTOR_SPEC.md
📁 カテゴリ: フェーズ仕様
🏷️ タグ: Phase 2, Director, LLM評価

## 目次
1. 概要
2. 背景と目的
3. 詳細仕様
   - 3.1 サブセクション
   - 3.2 サブセクション
4. 実装要件
5. 関連文書
```

## 注意事項

- 機密情報（APIキー、パスワード等）は自動的に除去
- 既存ファイルがある場合は上書き確認
- UTF-8エンコーディングで保存
- 改行コードはLF統一

## 使用例

```
ユーザー: これはGeminiから取得したOllama APIの情報です
[コピペ内容]

Claude: /save-spec を実行します。

✅ 仕様書を保存しました
📄 ファイル: specs/api/API_OLLAMA.md
```
