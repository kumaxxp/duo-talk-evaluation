# v2.3 モデル比較 統合レポート

**日時**: 2026-01-23
**実験ID**: v23_model_comparison

---

## 1. 実験諸元

| 項目 | 値 |
|------|-----|
| バックエンド | Ollama |
| 比較モデル | gemma3:12b, llama3.1:8b, qwen2.5:14b |
| プロンプト構造 | Layered (v3.8.1) |
| RAG | 無効 |
| Director | DirectorMinimal (v2.2 relaxed) |
| max_retries | 3 |
| シナリオ数 | 3 |
| 実行回数/シナリオ | 2 |
| 総実行数/モデル | 12 (6 without + 6 with Director) |

---

## 2. 比較サマリー

### 2.1 定量比較

| モデル | 平均リトライ数 | 総不採用数 | スコア改善 | 生成速度 |
|--------|---------------|-----------|-----------|---------|
| **gemma3:12b** | 0.33 | 3 | +11.9% | ~18s |
| **llama3.1:8b** | 0.00 | 0 | +3.3% | ~7s |
| **qwen2.5:14b** | 2.33 | 17 | +5.5% | ~15s |

### 2.2 不採用理由の内訳

| モデル | tone_check | context_check | 合計 |
|--------|------------|---------------|------|
| gemma3:12b | 2 | 1 | 3 |
| llama3.1:8b | 0 | 0 | 0 |
| qwen2.5:14b | 17 | 0 | 17 |

### 2.3 空Thought発生率（詳細）

| モデル | 空Thought数 | 総ターン数 | 空Thought率 | 深刻度 |
|--------|------------|----------|------------|--------|
| gemma3:12b | 11 | 64 | **17.2%** | 🔴 深刻 |
| llama3.1:8b | 12 | 64 | **18.8%** | 🔴 深刻 |
| qwen2.5:14b | 0 | 64 | **0.0%** | ✅ 問題なし |

**空Thoughtの例:**
```
- **Thought**: (
- **Output**: (明るく元気な声で) 「おはよう～！今日も楽しみにしててよ～」
```

**v2.3基準との比較:**
- 目標: 空Thought率 < 5%
- gemma3:12b: **未達成** (17.2% > 5%)
- llama3.1:8b: **未達成** (18.8% > 5%)
- qwen2.5:14b: **達成** (0.0% < 5%)

---

## 3. 主要な問題点

### 3.1 gemma3:12b の問題

**問題1: 空Thoughtの発生**
```
Turn 3: やな
- **Thought**: (
- **Output**: (あゆを見ながら、軽く叩いて) 「おはよう、あゆ...」
```

**問題2: 「姉様」の誤用（やな）**
```
Thought: (あゆの毒舌、朝からキツいわ～、でもまあ、それも妹らしくて可愛いよね。)
Output: (笑って) 「あらあら、またそんなこと言っちゃった。でも、まあ、姉様としては...」
↑ やなが「姉様」を使用（禁止）→ RETRY
```

### 3.2 llama3.1:8b の問題

**問題1: 空Thoughtの発生**
```
Turn 5: やな
- **Thought**: (
- **Output**: (明るく元気な声で) 「早い！あゆもそうだね...」
```

**問題2: キャラクター混乱**
```
Turn 2: あゆ
- **Output**: ...「姉様」ではなく「あゆ」で呼んだのは自分の設定だから良いと思いますね。
↑ メタ発言が出力に含まれる
```

**問題3: 「あゆちゃん」の使用（禁止）**
```
Turn 5: やな
- **Output**: *やなはあゆに向かって明るく微笑みながら* 「あゆちゃん、大丈夫？...」
↑ Director無しでは検出されない
```

### 3.3 qwen2.5:14b の問題

**問題: 「姉様」の誤用（やな）- 非常に高頻度**
```
Turn 1: やな (17件中の例)
Thought: （今日は早く起きたな。あゆの準備が大変そうなので手伝ってあげよう）
Output: *微笑んで* 「おはよう、姉様、今日も一日頑張ろうね～」
↑ やなが「姉様」を使用（禁止）→ RETRY

Turn 3: やな (繰り返し発生)
Output: *元気に頷いて* 「大丈夫だよ～、今日は新しいプロジェクトの準備だから楽しみだよ！姉様も一緒に...
↑ やなが「姉様」を使用（禁止）→ RETRY
```

---

## 4. 会話品質の比較

### 4.1 casual_greeting シナリオ

#### gemma3:12b
```
やな: (にっこり笑って) 「おはよう、あゆ！ゆっくり起きてるね～」
あゆ: *少し眠そうな目で* 「おはようございます、姉様。」
やな: (あゆを見ながら、軽く叩いて) 「おはよう、あゆ。そんなに眠そうにしないでよ～、今日は大事な日だよ～ね！」
```
**評価**: 自然な姉妹の掛け合い。語尾「～」「ね」が適切。

#### llama3.1:8b
```
やな: *明るく元気な声で* 「おはよう～！今日も楽しみにしててよ～」
あゆ: *やなに向かって頭をさげながら* 「おはよう…あなた今日も元気そうですね...」
やな: *明るく柔らかい口調で* 「おはよう～！今日も楽しみにしててよ～」
```
**評価**: やなの語調は良いが、あゆが「あなた」と呼ぶのは不適切。会話が単調。

#### qwen2.5:14b
```
やな: *穏やかに微笑んで* 「おはよう、あゆ。今日も一日よろしくね～」
あゆ: *控えめに微笑んで* 「おはようございます、姉様。」
やな: *優しく頷いて* 「あゆもいつも丁寧だね～」
```
**評価**: 最も自然な会話。姉妹関係が適切に表現。

### 4.2 topic_exploration シナリオ

#### gemma3:12b
```
やな: (にっこり笑って) 「そうねぇ… 最近は生成AIの進化がすごいよね！あゆ、何か気になることある？」
あゆ: *少し考え込むように顎に手を当てる* 「はい、姉様。技術の進歩は素晴らしいですが、同時に、フェイクニュースの拡散や著作権侵害といった問題も深刻ですよね。」
```
**評価**: 内容が豊富で、キャラクターの性格が反映されている。

#### llama3.1:8b
```
やな: *興奮した表情で* 「あゆ、最近のAIって本当にすごいじゃん！もう、人間が書く必要もなくなったらいいね～」
あゆ: *思うように頷きながら* 「そうですね、やな姉様。まだ人間が書く必要があるのは残念ですが...」
```
**評価**: 内容が薄く、会話の深みがない。

#### qwen2.5:14b
```
やな: (微笑んで) 「最近のAI技術、めっちゃ進んでるんだよ。でも、怖がらせちゃったらダメだからね～」
あゆ: *眉間に皺を寄せ* 「確かに進化していますが、姉様が言うほど簡単なものではないかもしれません。AI倫理やセキュリティも重要な課題ですからね。」
```
**評価**: 姉妹の性格差が明確。あゆの「毒舌」が適切に表現。

---

## 5. 結論と推奨

### 5.1 モデル別評価

| モデル | Thought品質 | 会話品質 | Director互換性 | 総合評価 |
|--------|------------|---------|---------------|---------|
| gemma3:12b | B (空あり) | A | A | **B+** |
| llama3.1:8b | B (空あり) | C | A+ (0 RETRY) | **B** |
| qwen2.5:14b | A | A+ | C (多数RETRY) | **B** |

### 5.2 推奨モデル

**Director有効時**: **gemma3:12b** または **llama3.1:8b**
- 理由: qwen2.5:14bは「姉様」誤用が多発し、リトライが頻繁

**Director無効時**: **qwen2.5:14b**
- 理由: 会話品質が最も高く、Thought内容も充実

### 5.3 v2.3仮説の検証結果

| 仮説 | 目標 | gemma3:12b | llama3.1:8b | qwen2.5:14b |
|------|------|------------|-------------|-------------|
| Thought marker欠落率 | 0% | ✅ 0% | ✅ 0% | ✅ 0% |
| 空Thought率 | < 5% | ❌ 17.2% | ❌ 18.8% | ✅ 0% |
| 平均リトライ数 | < 1.0 | ✅ 0.33 | ✅ 0.00 | ❌ 2.33 |

**結論:**
- **qwen2.5:14b**: 空Thought問題なし、しかし「姉様」誤用でリトライ多発
- **gemma3:12b / llama3.1:8b**: 空Thought問題が深刻（約17-19%）

### 5.4 次のステップ

#### 優先度: 高（空Thought問題）
1. **空Thought対策（gemma3/llama3.1向け）**:
   - 最小Thought長チェックの導入（DirectorMinimalに追加）
   - 空Thoughtを検出した場合はRETRYを発行
   - 目標: 空Thought率 < 5%

2. **qwen2.5:14bの採用検討**:
   - 空Thought率0%は大きな利点
   - 「姉様」誤用問題はプロンプト改善で対応可能か検証

#### 優先度: 中
3. **qwen2.5:14b向け対策**: プロンプトで「姉様禁止」をより強調
4. **llama3.1:8b向け対策**: 会話品質向上のためFew-shot例増強

---

## 6. 詳細レポートへのリンク

- [gemma3:12b 詳細レポート](v23_gemma3_12b/director_ab_20260123_160434/REPORT.md)
- [llama3.1:8b 詳細レポート](v23_llama31_8b/director_ab_20260123_160837/REPORT.md)
- [qwen2.5:14b 詳細レポート](v23_qwen25_14b/director_ab_20260123_161022/REPORT.md)

---

*Generated by duo-talk-evaluation v2.3 model comparison framework*
